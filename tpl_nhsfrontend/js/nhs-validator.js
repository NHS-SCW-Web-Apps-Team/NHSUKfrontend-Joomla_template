!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("dayjs"),require("jQuery")):"function"==typeof define&&define.amd?define(["dayjs","jQuery"],t):"object"==typeof exports?exports.nhsValidator=t(require("dayjs"),require("jQuery")):e.nhsValidator=t(e.dayjs,e.jQuery)}(self,(function(e,t){return function(){"use strict";var r={2:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AddAttributeValue=function(e,t,r){e.getAttribute(t)?new RegExp("(^|\\s)"+r+"(\\s|$)").test(e.getAttribute(t))||e.setAttribute(t,e.getAttribute(t)+" "+r):e.setAttribute(t,r)}},965:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropSupported=function(){return void 0!==document.createElement("div").ondrop}},667:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FileApiSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.files}},30:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FormDataSupported=function(){return"function"==typeof FormData}},705:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeListForEach=function(e,t){if(window.NodeList.prototype.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t.call(window,e[r],r,e)}},504:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveAttributeValue=function(e,t,r){var n,a;e.getAttribute(t)&&(e.getAttribute(t)==r?e.removeAttribute(t):(n=new RegExp("(^|\\s)"+r+"(\\s|$)"),(a=e.getAttribute(t).match(n))&&3==a.length&&e.setAttribute(t,e.getAttribute(t).replace(n,a[1]&&a[2]?" ":""))))}},826:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(965);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(667);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var u=r(30);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var i=r(705);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=r(504);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}))},185:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.FormValidator=void 0;var n,a=(n=r(609))&&n.__esModule?n:{default:n},o=r(826);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"entityMap",{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}),this.form=t,this.errors=[],this.validators=[],(0,a.default)(this.form).on("submit",a.default.proxy(this,"onSubmit")),this.summary=r&&r.summary?(0,a.default)(r.summary):(0,a.default)(".nhsuk-error-summary"),this.originalTitle=document.title}var t,r;return t=e,(r=[{key:"escapeHtml",value:function(e){if(String(e).includes("#39#")){var t=String.fromCharCode(39),r=String(e).replace("#39#",t);return String(r).replace(/[&<>"`=\/]/g,(function(e){return entityMap[e]}))}return String(e).replace(/[&<>"'`=\/]/g,(function(e){return entityMap[e]}))}},{key:"resetTitle",value:function(){document.title=this.originalTitle}},{key:"updateTitle",value:function(){document.title=this.errors.length+" errors - "+document.title}},{key:"showSummary",value:function(){this.summary.html(this.getSummaryHtml()),this.summary.removeClass("nhsuk-u-visually-hidden"),this.summary.attr("aria-labelledby","errorSummary-heading"),this.summary.focus()}},{key:"getSummaryHtml",value:function(){var e='<h2 id="error-summary-title" class="nhsuk-error-summary__title">There is a problem</h2>';e+='<div class="nhsuk-error-summary__body">',e+='<ul class="nhsuk-list nhsuk-error-summary__list">';for(var t=0,r=this.errors.length;t<r;t++){var n=this.errors[t];e+="<li>",e+='<a href="#'+this.escapeHtml(n.fieldName)+'">',e+=this.escapeHtml(n.message),e+="</a>",e+="</li>"}return(e+="</ul>")+"</div>"}},{key:"hideSummary",value:function(){this.summary.addClass("nhsuk-u-visually-hidden"),this.summary.removeAttr("aria-labelledby")}},{key:"onSubmit",value:function(e){this.removeInlineErrors(),this.hideSummary(),this.resetTitle(),this.validate()||(e.preventDefault(),this.updateTitle(),this.showSummary(),this.showInlineErrors())}},{key:"showInlineErrors",value:function(){for(var e=0,t=this.errors.length;e<t;e++)this.showInlineError(this.errors[e])}},{key:"showInlineError",value:function(e){var t=e.fieldName+"-error",r='<span class="nhsuk-error-message" id="'+t+'">'+this.escapeHtml(e.message)+"</span>",n=(0,a.default)("#"+e.fieldName);n.length||(n=(0,a.default)("#"+e.fieldName+"-1"));var u=n.parents(".nhsuk-form-group"),i=u.find("label"),l=u.find("legend"),s=u.find("fieldset");u.addClass("nhsuk-form-group--error"),l.length?(l.after(r),u.attr("aria-invalid","true"),(0,o.AddAttributeValue)(s[0],"aria-describedby",t)):(i.after(r),n.attr("aria-invalid","true"),(0,o.AddAttributeValue)(n[0],"aria-describedby",t))}},{key:"removeInlineErrors",value:function(){for(var e=0;e<this.errors.length;e++)this.removeInlineError(this.errors[e])}},{key:"removeInlineError",value:function(e){var t=(0,a.default)("#"+e.fieldName);t.length||(t=(0,a.default)("#"+e.fieldName+"-1"));var r=t.parents(".nhsuk-form-group");r.find(".nhsuk-error-message").remove(),r.removeClass("nhsuk-form-group--error"),r.find("[aria-invalid]").attr("aria-invalid","false");var n=e.fieldName+"-error";(0,o.RemoveAttributeValue)(r.find("[aria-describedby]")[0],"aria-describedby",n)}},{key:"addValidator",value:function(e,t){this.validators.push({fieldName:e,rules:t,field:this.form.elements[e]})}},{key:"removeValidator",value:function(e){this.validators=this.validators.filter((function(t){return t.fieldName!==e}))}},{key:"validate",value:function(){this.errors=[];var e,t,r=null,n=!0;for(e=0;e<this.validators.length;e++)for(r=this.validators[e],t=0;t<r.rules.length;t++){if("boolean"==typeof(n=r.rules[t].method(r.field,r.rules[t].params))&&!n){this.errors.push({fieldName:r.fieldName,message:r.rules[t].message});break}if("string"==typeof n){this.errors.push({fieldName:n,message:r.rules[t].message});break}}return 0===this.errors.length}}])&&u(t.prototype,r),e}();t.FormValidator=i},692:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AtLeastOne=function(e,t,r){r.validators.push({fieldName:e[0],field:e,rules:[{method:function(e){var t,n="";for(t=0;t<e.length;t++)n+=r.form.elements[e[t]].value;return n.length>0},message:t}]})}},720:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BornBeforeDeath=function(e,t,r,n,o,u,i){var l=[e,t,r,n,o,u];validator.validators.push({fieldName:e,field:l,rules:[{method:function(e){console.log(e);var t=validator.form.elements[e[0]].value.padStart(2,"0"),r=validator.form.elements[e[1]].value.padStart(2,"0"),n=validator.form.elements[e[2]].value;if(!(validator.form.elements[e[0]].value.length<=0||validator.form.elements[e[1]].value.length<=0||validator.form.elements[e[2]].value.length<4)){var o=validator.form.elements[e[3]].value.padStart(2,"0"),u=validator.form.elements[e[4]].value.padStart(2,"0"),i=validator.form.elements[e[5]].value;if(!(validator.form.elements[e[3]].value.length<=0||validator.form.elements[e[4]].value.length<=0||validator.form.elements[e[5]].value.length<4)){var l=[i,u,o].join("-"),s=[n,r,t].join("-");return(0,a.default)(s,"YYYY-MM-DD").diff((0,a.default)(l,"YYYY-MM-DD"),"day")>0}}},message:"Date of death is before date of birth"}]})};var n,a=(n=r(349))&&n.__esModule?n:{default:n}},287:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxRequired=function(e,t,r){r.validators.push({fieldName:e,field:r.form.elements[e],rules:[{method:function(e){var t,r=!1;for(t=0;t<e.length;t++)e[t].checked&&(r=!0);return r},message:t}]})}},138:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Date=function(e,t,r,n,o){var u=[e,t,r];o.validators.push({fieldName:e,field:u,rules:[{method:function(e){if(console.log(e),!(o.form.elements[e[0]].value.length<=0||o.form.elements[e[1]].value.length<=0||o.form.elements[e[2]].value.length<4)){var t=o.form.elements[e[0]].value.padStart(2,"0"),r=o.form.elements[e[1]].value.padStart(2,"0"),n=o.form.elements[e[2]].value,u=(n.concat("-",r,"-",t),[n,r,t].join("-"));return(0,a.default)(u,"YYYY-MM-DD").format("YYYY-MM-DD")===u}},message:"The date of "+n+" supplied is an invalid date"}]}),o.addValidator(e,[{method:function(e,t){return t.day.value.trim().length>0&&t.month.value.trim().length>0&&4===t.year.value.trim().length},message:"Please enter a valid date of "+n,params:{day:document.getElementById(e),month:document.getElementById(t),year:document.getElementById(r)}}])};var n,a=(n=r(349))&&n.__esModule?n:{default:n}},718:function(e,t,r){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DateInFuture=function(e,t,r,n){var a=[e,t,r];validator.validators.push({fieldName:e,field:a,rules:[{method:function(e){console.log(e);var t=validator.form.elements[e[0]].value.padStart(2,"0"),r=validator.form.elements[e[1]].value.padStart(2,"0"),n=validator.form.elements[e[2]].value;if(!(validator.form.elements[e[0]].value.length<=0||validator.form.elements[e[1]].value.length<=0||validator.form.elements[e[2]].value.length<4)){if(""!==t&&""!==r&&""!==n){var a=new Date;return new Date(n,r-1,t)<=a}return!0}},message:"Date is in the future"}]})},(n=r(349))&&n.__esModule},236:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmailValidator=function(e){validator.addValidator(e,[{method:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)},message:"Please enter a valid email address"}])}},650:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MustBeDifferent=function(e,t,r,n){var a=[e,t];n.validators.push({fieldName:e,field:a,rules:[{method:function(e){return(void 0===n.form.elements[e[0]].value?"":n.form.elements[e[0]].value).trim()!==e[1].trim()},message:r}]})}},122:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NhsNumber=function(e,t){t.addValidator(e,[{method:function(e){return e.value.trim().length>0},message:"No NHS number supplied"}]),t.addValidator(e,[{method:function(e){var t=e.value.replace(/\s+/g,"");return!isNaN(Number(t))},message:"Non-numerical input"}]),t.addValidator(e,[{method:function(e){var t=e.value.replace(/\s+/g,"");return 10===t.length||!t.length<10},message:"NHS number too long"}]),t.addValidator(e,[{method:function(e){var t=e.value.replace(/\s+/g,"");return 10===t.length||0===t.length},message:"NHS number too short"}]),t.addValidator(e,[{method:function(e){if(10==e.value.length){var t=e.value.replace(/\s+/g,"");Number.isInteger(t)&&(t=t.toString());var r=t.split(""),n=11-r.slice(0,9).map((function(e,t){return e*(11-(t+1))})).reduce((function(e,t){return e+t}),0)%11;11===n&&(n=0);var a=r[9];return n===Number(a)}},message:"NHS number supplied is not valid"}])}},711:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberGreaterThan=function(e,t,r,n){var a=[e,t];n.validators.push({fieldName:e,field:a,rules:[{method:function(e){var t=n.form.elements[e[0]].value;return!!t&&t>e[1]},message:r}]})}},707:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberGreaterThanOrEqual=function(e,t,r,n){var a=[e,t];n.validators.push({fieldName:e,field:a,rules:[{method:function(e){var t=n.form.elements[e[0]].value;return!!t&&t>=e[1]},message:r}]})}},923:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberRequired=function(e,t,r){r.addValidator(e,[{method:function(e){var t=void 0===e.value?"":e.value;return t.trim().length>0&&/^[0-9]*$/.test(t.trim())},message:t}])}},534:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.OlderThanFour=function(e,t,r,n,o,u,i){var l=[e,t,r,n,o,u];i.validators.push({fieldName:r,field:l,rules:[{method:function(e){var t=i.form.elements[e[0]].value.padStart(2,"0"),r=i.form.elements[e[1]].value.padStart(2,"0"),n=i.form.elements[e[2]].value;if(!(i.form.elements[e[0]].value.length<=0||i.form.elements[e[1]].value.length<=0||i.form.elements[e[2]].value.length<4)){var o=[n,r,t].join("-");if(""!==t&&""!==r&&""!==n){var u=i.form.elements[e[3]].value.padStart(2,"0"),l=i.form.elements[e[4]].value.padStart(2,"0"),s=i.form.elements[e[5]].value;if(""!==u&&""!==l&&""!==s){var d=[s,l,u].join("-");return(0,a.default)(d,"YYYY-MM-DD").diff((0,a.default)(o,"YYYY-MM-DD"),"years")>=4}return(0,a.default)().diff((0,a.default)(o,"YYYY-MM-DD"),"years")>=4}return!0}},message:"The year provided is younger than four"}]})};var n,a=(n=r(349))&&n.__esModule?n:{default:n}},284:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneNumber=function(e,t,r){r.addValidator(e,[{method:function(e){var t=e.value.replace(/\s/g,"");return/(\s*\(?(0|\+44)(\s*|-)\d{4}\)?(\s*|-)\d{3}(\s*|-)\d{3}\s*)|(\s*\(?(0|\+44)(\s*|-)\d{3}\)?(\s*|-)\d{3}(\s*|-)\d{4}\s*)|(\s*\(?(0|\+44)(\s*|-)\d{2}\)?(\s*|-)\d{4}(\s*|-)\d{4}\s*)|(\s*(7|8)(\d{7}|\d{3}(\-|\s{1})\d{4})\s*)|(\s*\(?(0|\+44)(\s*|-)\d{3}\s\d{2}\)?(\s*|-)\d{4,5}\s*)$/.test(t)},message:t}])}},527:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PostCode=function(e,t,r){r.addValidator(e,[{method:function(e){var t=e.value.replace(/\s/g,"");return/^([A-Z][A-HJ-Y]?\d[A-Z\d]? ?\d[A-Z]{2}|GIR ?0A{2})$/i.test(t)},message:t}])}},672:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringRequired=function(e,t,r,n){var a=[e,t];n.validators.push({fieldName:e,field:a,rules:[{method:function(e){return(void 0===n.form.elements[e[0]].value?"":n.form.elements[e[0]].value).trim().length>e[1]},message:r}]})}},392:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(672);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(138);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(122);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var u=r(720);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var i=r(718);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=r(236);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var s=r(527);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var d=r(692);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r(287);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var c=r(284);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var m=r(534);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var v=r(923);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var h=r(711);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=r(650);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var b=r(707);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}))},352:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n={InitAll:!0};t.InitAll=function(e){void 0!==(e=void 0!==e?e:{}).scope?e.scope:document};var a=r(185);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(392);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},349:function(t){t.exports=e},609:function(e){e.exports=t}},n={};return function e(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return r[t](o,o.exports,e),o.exports}(352)}()}));